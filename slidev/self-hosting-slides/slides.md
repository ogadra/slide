---
theme: default
# random image from a curated Unsplash collection by Anthony
# like them? see https://unsplash.com/collections/94734566/slidev
# some information about your slides (markdown enabled)
title: ã‚¹ãƒ©ã‚¤ãƒ‰è‡ªå·±ç®¡ç†ã®ã™ã‚ã‚
info: ã‚¹ãƒ©ã‚¤ãƒ‰è‡ªå·±ç®¡ç†ã®ã™ã‚ã‚
# apply unocss classes to the current slide
# class: text-center
colorSchema: 'dark'
# https://sli.dev/features/drawing
drawings:
  enabled: false
# slide transition: https://sli.dev/guide/animations.html#slide-transitions
transition: slide-left
# enable MDC Syntax: https://sli.dev/features/mdc
mdc: true
canvasWidth: 960
lang: ja
---

<style>
.slidev-layout {
  padding-top: 0 !important;
}

</style>

# ã‚¹ãƒ©ã‚¤ãƒ‰è‡ªå·±ç®¡ç†ã®ã™ã‚ã‚

## ogadra

---

<div class="h-full mt-4 grid">
<div class="my-auto flex">
  <div class="w-1/2 flex flex-col justify-center text-left justify-start">
    <h1>ogadra</h1>
    <p>Motto: Done is better than perfect.</p>
    <p>Favorite languages: Typescript, Go</p>
  </div>
  <div class="w-1/2 flex justify-center items-center p-8 max-h-md object-cover">
    <img src="https://media.ogadra.com/misskey/drive/b7f08bb1-df92-45c3-855d-521eb9859015.gif" class="rounded-2xl border-image h-full object-cover">
  </div>
</div>
</div>


---

## ã‚¹ãƒ©ã‚¤ãƒ‰ç®¡ç†ã€ã—ã¦ã„ã¾ã™ã‹ï¼Ÿ

- Google Slideã®URLã‚’å…±æœ‰
- SlideShare, Speaker Deckç­‰ã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
- ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ãªã„

---

## ç§ã¯æ€ã„ã¾ã—ãŸ

<div class="text-3xl my-32 text-center">
  ã‚¹ãƒ©ã‚¤ãƒ‰ã‚’GitHubã§ç®¡ç†ã—ã¦Publishã—ãŸã„ï¼
</div>

---

## ã‚„ã‚ŠãŸã„ã“ã¨

- ã‚¹ãƒ©ã‚¤ãƒ‰ã‚’GitHubã§ç®¡ç†
  - è¤‡æ•°ã‚¹ãƒ©ã‚¤ãƒ‰ã‚’1ã¤ã®ãƒªãƒã‚¸ãƒˆãƒªã§ç®¡ç†
  - mainãƒ–ãƒ©ãƒ³ãƒã«ãƒãƒ¼ã‚¸ã—ãŸã‚‰è‡ªå‹•ã§ãƒ‡ãƒ—ãƒ­ã‚¤
- ã‚¹ãƒ©ã‚¤ãƒ‰ã‚’è‡ªåˆ†ã®ãƒ‰ãƒ¡ã‚¤ãƒ³ã§å…¬é–‹ (slide.ogadra.com)

---

## ä½œã‚Šã¾ã—ãŸ

https://github.com/ogadra/slide

https://slide.ogadra.com

ï¼ˆ & ã¿ãªã•ã‚“ãŒä»Šè¦‹ã¦ã„ã‚‹ã‚¹ãƒ©ã‚¤ãƒ‰ï¼‰

---

## ä¸»ãªæ©Ÿèƒ½

- è¤‡æ•°ã‚¹ãƒ©ã‚¤ãƒ‰ã‚’monorepoã§ç®¡ç†
- mainãƒ–ãƒ©ãƒ³ãƒã«ãƒãƒ¼ã‚¸ã—ãŸã‚‰è‡ªå‹•ã§ãƒ‡ãƒ—ãƒ­ã‚¤
- ã‚¹ãƒ©ã‚¤ãƒ‰æ¯ã«OGPã‚’è¨­å®š

---

## æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

- Hono
  - ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°
- Slidev
  - ã‚¹ãƒ©ã‚¤ãƒ‰ä½œæˆ
- Cloudflare Workers
  - CloudflareãŒæä¾›ã™ã‚‹ã€FaaSã®ã‚ˆã†ãªã‚‚ã®

---

## Slidevã®ç‰¹å¾´

- Markdownã§ã‚¹ãƒ©ã‚¤ãƒ‰ã‚’ä½œæˆ
- Vue.jsã§ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º
  - Header / Footerã®è¨­å®šãŒå¯èƒ½
- PNG / PDF / HTMLã§ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
- ã‚¹ãƒ©ã‚¤ãƒ‰å…¨ä½“ã®OGPã‚’è¨­å®š

<!--
reveal.jsã ã¨
- Header / Footerã®è¨­å®šã«ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãŒå¿…è¦
- PNGã§ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã§ããªã„
- (é£½ããŸ)
-->

---

## Slidevã§ã§ããªã„ã“ã¨

- ãƒšãƒ¼ã‚¸ã”ã¨ã®OGPè¨­å®š

---

## ã‚¹ãƒ©ã‚¤ãƒ‰æ¯ã®OGPã‚’å®Ÿç¾ã—ãŸã„

- ãƒ“ãƒ«ãƒ‰çµæœã‚’æ›¸ãæ›ãˆã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¯æ›¸ããŸããªã„
  - ãƒ“ãƒ«ãƒ‰å¾Œã®minifyã•ã‚ŒãŸJSã‚’æ›¸ãæ›ãˆã‚‹ã®ã¯ã—ã‚“ã©ã„
  - ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ãƒˆã™ã‚‹ã®ã«ã¯é“ã®ã‚ŠãŒé•·ã„

<v-click><div class="my-12 text-center text-3xl">HTMLRewriterã‚’ä½¿ã£ã¦ã€HTMLã‚’æ›¸ãæ›ãˆãŸ</div></v-click>

---

## Cloudflare Workers

- æœ€åˆã¯Cloudflare Pagesã‚’ç”¨ã„ã¦ã„ãŸãŒã€å¾Œã«ç§»è¡Œ
  - å…¬å¼ã®æ¨å¥¨ãŒCloudflare Workersã«ãªã‚‹ãŸã‚
  - HTMLRewriterã‚’ç”¨ã„ã‚‹ãŸã‚

---

## ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ¦‚è¦

<div class="flex justify-center items-center">
  <img src="./imgs/slide.svg" class="rounded-sm" width="550px">
</div>

<div class="text-center my-4">Honoã§ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã—ã¦ã€ãƒ“ãƒ«ãƒ‰ã—ãŸå„ã‚¹ãƒ©ã‚¤ãƒ‰ã‚’è¿”ã™</div>

---

## ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ

```bash
â”œâ”€â”€ dist
â”‚Â Â  â”œâ”€â”€ server.js
â”‚Â Â  â”œâ”€â”€ slideA
â”‚Â Â  â””â”€â”€ slideB
â”œâ”€â”€ home
â”‚Â Â  â””â”€â”€ server.ts
â”œâ”€â”€ slidev
â”‚Â Â  â”œâ”€â”€ slideA
â”‚Â Â  â””â”€â”€ slideB
â””â”€â”€ wrangler.jsonc
```

<!--
- `/slidev`ã«ã‚¹ãƒ©ã‚¤ãƒ‰ã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’å…¥ã‚Œã‚‹
  - ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ¯ã«`/dist`ã«ãƒ“ãƒ«ãƒ‰ã—ãŸã‚‚ã®ã‚’å‡ºåŠ›
- `/home`ã«ã¯ã‚¨ãƒ³ãƒˆãƒªãƒã‚¤ãƒ³ãƒˆã§ã‚ã‚‹`server.ts`ã‚’é…ç½®
  - å„ã‚¹ãƒ©ã‚¤ãƒ‰ã¸ã®ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°
  - HTMLRewriterã‚’ç”¨ã„ãŸOGPã®è¨­å®š
-->

---

## ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ

- `/slidev`ã«ã‚¹ãƒ©ã‚¤ãƒ‰ã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’å…¥ã‚‹
  - ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ¯ã«`/dist`ã«ãƒ“ãƒ«ãƒ‰ã—ãŸã‚‚ã®ã‚’å‡ºåŠ›
- `/home`ã«ã¯ã‚¨ãƒ³ãƒˆãƒªãƒã‚¤ãƒ³ãƒˆã§ã‚ã‚‹`server.ts`ã‚’é…ç½®
  - å„ã‚¹ãƒ©ã‚¤ãƒ‰ã¸ã®ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°
  - HTMLRewriterã‚’ç”¨ã„ãŸOGPã®è¨­å®š

---

## HTMLRewriterã¨ã¯

The `HTMLRewriter` class allows developers to build comprehensive and expressive HTML parsers inside of a Cloudflare Workers application. It can be thought of as a jQuery-like experience directly inside of your Workers application. Leaning on a powerful JavaScript API to parse and transform HTML, `HTMLRewriter` allows developers to build deeply functional applications.

<br/>

Cloudflare Workersã®ä¸­ã§jQueryã®ã‚ˆã†ã«HTMLã‚’æ›¸ãæ›ãˆã‚‰ã‚Œã‚‹ã‚‰ã—ã„

<!--
`HTMLRewriter` ã‚¯ãƒ©ã‚¹ã‚’ä½¿ç”¨ã™ã‚‹ã¨ã€é–‹ç™ºè€…ã¯ Cloudflare Workers ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å†…ã§ã€åŒ…æ‹¬çš„ã§è¡¨ç¾åŠ›è±Šã‹ãª HTML ãƒ‘ãƒ¼ã‚µãƒ¼ã‚’æ§‹ç¯‰ã§ãã¾ã™ã€‚ã“ã‚Œã¯ã€Workers ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å†…ã§ç›´æ¥ jQuery ã®ã‚ˆã†ãªä½“é¨“ãŒã§ãã‚‹ã¨è€ƒãˆã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚å¼·åŠ›ãª JavaScript API ã‚’æ´»ç”¨ã—ã¦ HTML ã‚’è§£æãŠã‚ˆã³å¤‰æ›ã™ã‚‹ã“ã¨ã§ã€`HTMLRewriter` ã¯é–‹ç™ºè€…ãŒé«˜åº¦ã«æ©Ÿèƒ½çš„ãªã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æ§‹ç¯‰ã™ã‚‹ã“ã¨ã‚’å¯èƒ½ã«ã—ã¾ã™ã€‚

`HTMLRewriter` ã‚¯ãƒ©ã‚¹ã¯ã€Workers ã‚¹ã‚¯ãƒªãƒ—ãƒˆå†…ã§ä¸€åº¦ã ã‘ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹åŒ–ã•ã‚Œã€`on` ãŠã‚ˆã³ `onDocument` é–¢æ•°ã‚’ä½¿ç”¨ã—ã¦å¤šæ•°ã®ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ãŒã‚¢ã‚¿ãƒƒãƒã•ã‚Œã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
-->
---

## HTMLRewriterã¨ã¯

- HTMLã‚’æ›¸ãæ›ãˆã‚‹ãŸã‚ã®æ©Ÿèƒ½
- é™çš„ãƒ•ã‚¡ã‚¤ãƒ«ã¨ã—ã¦é…ä¿¡ã™ã‚‹HTMLã‚’å‹•çš„ã«æ›¸ãæ›ãˆã‚‹ã“ã¨ãŒã§ãã‚‹

---

## HTMLRewriterã®ä½¿ã„æ–¹

```ts
const returnHTML = async (pathname: string, num: number) => {
  const rewriter = new HTMLRewriter();
  const html = await c.env.ASSETS.fetch(pathname);
  
  return rewriter
    .on(
      "head",
      new HeadHandler(`${pathname}/slides-export/${num}.png`)
    )
    .transform(html);
}
```

---

## HTMLRewriterã®ä½¿ã„æ–¹

```typescript
class HeadHandler {
  content: string;
  constructor(content: string) {
    this.content = content;
  }
  element(element:any) {
    element.append(
      `<meta property="og:image" content="${this.content}" />`,
      { html: true }
    )
  }
}
```

---

## çµæœ

- ã‚¹ãƒ©ã‚¤ãƒ‰ã®ä½œæˆ, å…±æœ‰ã«ãƒã‚¦ã‚¹ã‚’è§¦ã‚‰ãªããªã£ã¦Happy ğŸ˜„ ğŸ‰

---


<div class="h-full mt-4 grid">
<div class="my-auto flex">
  <div class="w-1/2 flex flex-col justify-center text-left justify-start">
    <p>ã”æ¸…è´ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸ</p>
    <ul>
      <li>Twitter: <a href="https://twitter.com/const_myself" target="_brank" rel="noopener noreferrer">@const_myself</a></li>
      <li>GitHub: <a href="https://github.com/ogadra" target="_brank" rel="noopener noreferrer">ogadra</a></li>
    </ul>
  </div>
  <div class="w-1/2 flex justify-center items-center p-8 max-h-md object-cover">
    <img src="https://media.ogadra.com/misskey/drive/b7f08bb1-df92-45c3-855d-521eb9859015.gif" class="rounded-2xl border-image h-full object-cover">
  </div>
</div>
</div>

<PoweredBySlidev mt-10 />
